---
ansible:
  extra_vars:
    ansible_python_interpreter: '/usr/bin/env python2.7'
  skip_tags: 'role::aptly::custom-gpg'
  raw_env_vars:
    ANSIBLE_NOCOWS: 1
  group_vars:
    all:
      aptly_architectures:
        - 'amd64'
      aptly_mirrors:
        - name: 'mariadb_10.0'
          archive_url: 'http://de-rien.fr/mariadb/repo/10.0/ubuntu'
          distribution: 'trusty'
          do_update: False
          component1:
            - 'main'
          create_flags:
            - '-keyring="maria_10_trusty_main.gpg"'
            - '-keyring="{{ aptly_system_archive_gpg_keys_keyring }}"'
          update_flags:
            - '-keyring="maria_10_trusty_main.gpg"'
            - '-keyring="{{ aptly_system_archive_gpg_keys_keyring }}"'
          gpg:
            key: '1BB943DB'
            server: 'keyserver.ubuntu.com'
            keyring: 'maria_10_trusty_main.gpg'
          state: 'present'
      aptly_repos:
        - name: 'testing'
          create_flags:
            - '-comment="Testing packages"'
            - '-component="main"'
            - '-distribution="trusty"'
          state: 'present'
dependency:
  name: 'galaxy'
driver:
  name: 'docker'
docker:
  containers:
    - name: 'aptly-docker-jessie'
      image: 'debian'
      image_version: 'jessie'
    - name: 'aptly-docker-trusty'
      image: 'ubuntu'
      image_version: 'trusty'
    - name: 'aptly-docker-xenial'
      image: 'ubuntu'
      image_version: 'xenial'
molecule:
  ignore_paths:
    - '.git'
    - '.molecule'
    - '.tox'
    - '.vagrant'
vagrant:
  platforms:
    - name: 'jessie64'
      box: 'debian/jessie64'
      linked_clone: True
    - name: 'trusty64'
      box: 'ubuntu/trusty64'
      linked_clone: True
    - name: 'xenial64'
      box: 'ubuntu/xenial64'
      linked_clone: True
  providers:
    - name: 'virtualbox'
      type: 'virtualbox'
      options:
        memory: 512
        cpus: 1
  instances:
    - name: 'aptly-vagrant'
      interfaces:
        - network_name: 'private_network'
          type: 'dhcp'
          auto_config: True
      options:
        append_platform_to_hostname: True
verifier:
  name: 'testinfra'
  options:
    sudo: True
